From 02595938a4d8bf5c1cc770b05a359b4c1392586a Mon Sep 17 00:00:00 2001
From: Jan Chaloupka <jchaloup@redhat.com>
Date: Tue, 15 Jul 2014 07:42:27 +0200
Subject: [PATCH] rpm.8

---
 rpm/man8/rpm.8 | 35 ++++++++++++++++++++++++-----------
 1 file changed, 24 insertions(+), 11 deletions(-)

diff --git a/rpm/man8/rpm.8 b/rpm/man8/rpm.8
index 4e038f4..c3b79bd 100644
--- a/rpm/man8/rpm.8
+++ b/rpm/man8/rpm.8
@@ -69,7 +69,7 @@ rpm \- RPM Package Manager
 
  [\fB\fIPACKAGE_NAME\fB\fR] [\fB-a,--all\fR] [\fB-f,--file \fIFILE\fB\fR]
  [\fB-g,--group \fIGROUP\fB\fR] {\fB-p,--package \fIPACKAGE_FILE\fB\fR]
- [\fB--fileid \fIMD5\fB\fR] [\fB--hdrid \fISHA1\fB\fR] [\fB--pkgid \fIMD5\fB\fR] [\fB--tid \fITID\fB\fR]
+ [\fB--fileid \fIID\fB\fR] [\fB--hdrid \fISHA1\fB\fR] [\fB--pkgid \fIMD5\fB\fR] [\fB--tid \fITID\fB\fR]
  [\fB--querybynumber \fIHDRNUM\fB\fR] [\fB--triggeredby \fIPACKAGE_NAME\fB\fR]
  [\fB--whatprovides \fICAPABILITY\fB\fR] [\fB--whatrequires \fICAPABILITY\fB\fR]
 
@@ -183,6 +183,12 @@ will be used for dependency checks and any scriptlet(s) (e.g.
 \fB%prep\fR if building, a package)
 will be run after a chroot(2) to
 \fIDIRECTORY\fR.
+.TP
+\fB-D, --define='\fIMACRO EXPR\fB'\fR
+Defines \fIMACRO\fR with value \fIEXPR\fR.
+.TP
+\fB-E, --eval='\fIEXPR\fB'\fR
+Prints macro expansion of \fIEXPR\fR.
 .SS "INSTALL AND UPGRADE OPTIONS"
 .PP
 In these options, \fIPACKAGE_FILE\fR can be either \fBrpm\fR binary
@@ -520,9 +526,9 @@ Query all installed packages.
 \fB-f, --file \fIFILE\fB\fR
 Query package owning \fIFILE\fR.
 .TP
-\fB--fileid \fIMD5\fB\fR
-Query package that contains a given file identifier, i.e. the
-\fIMD5\fR digest of the file contents.
+\fB--fileid \fIID\fB\fR
+Query package that contains a given file identifier. The
+\fIID\fR is the digest of the file contents. For different packages different hash algorithms may have been used (\fIMD5\fR, \fISHA1\fR, \fISHA256\fR, \fISHA384\fR, \fISHA512\fR, ...)
 .TP
 \fB-g, --group \fIGROUP\fB\fR
 Query packages with the group of \fIGROUP\fR.
@@ -599,7 +605,7 @@ Dump file information as follows (implies \fB-l\fR):
 .RS
 
 .nf
-path size mtime filedigest mode owner group isconfig isdoc rdev symlink
+path size mtime digest mode owner group isconfig isdoc rdev symlink
 	
 .fi
 .RE
@@ -649,7 +655,7 @@ The general form of an rpm verify command is
 Verifying a package compares information about the installed files in
 the package with information about the files taken from the package
 metadata stored in the rpm database.  Among other things, verifying
-compares the size, MD5 sum, permissions, type, owner and group of
+compares the size, digest, permissions, type, owner and group of
 each file.  Any discrepancies are displayed.
 Files that were not installed from the package, for example,
 documentation files excluded on installation using the
@@ -718,7 +724,7 @@ the corresponding \fB--verify\fR test:
 .nf
 \fBS\fR file \fBS\fRize differs
 \fBM\fR \fBM\fRode differs (includes permissions and file type)
-\fB5\fR MD\fB5\fR sum differs
+\fB5\fR digest (formerly MD\fB5\fR sum) differs
 \fBD\fR \fBD\fRevice major/minor number mismatch
 \fBL\fR read\fBL\fRink(2) path mismatch
 \fBU\fR \fBU\fRser ownership differs
@@ -830,17 +836,24 @@ Use \fB--initdb\fR to create a new database if one doesn't already exist
 (existing database is not overwritten), use
 \fB--rebuilddb\fR to rebuild the database indices from
 the installed package headers.
-.SS "SHOWRC"
-.PP
-The command
+.SS "MISCELLANEOUS COMMANDS"
 .PP
+.TP
 \fBrpm\fR \fB--showrc\fR
-.PP
 shows the values \fBrpm\fR will use for all of the
 options are currently set in
 \fIrpmrc\fR and
 \fImacros\fR
 configuration file(s).
+.TP
+\fBrpm\fR \fB--setperms\fR \fIPACKAGE_NAME\fR
+sets permissions of files in the given package.
+.TP
+\fBrpm\fR \fB--setugids\fR \fIPACKAGE_NAME\fR
+sets user/group ownership of files in the given package.
+.TP
+Options \fB--setperms\fR and \fB--setugids\fR are mutually exclusive.
+
 .SS "FTP/HTTP OPTIONS"
 .PP
 \fBrpm\fR can act as an FTP and/or HTTP client so
-- 
1.9.3

